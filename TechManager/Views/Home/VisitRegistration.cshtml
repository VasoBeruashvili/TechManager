<!DOCTYPE html>
<html ng-app="TechManager" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
    <title>Tech Manager</title>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/font-awesome.min.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.9.1.min.js"></script>
    <script src="~/Scripts/angular.min.js"></script>
    <script src="~/Scripts/angular-locale_ge.js"></script>
    <script src="~/Scripts/ui-bootstrap-tpls-0.13.1.min.js"></script>
    <link href="~/Content/jquery.clear.input.css" rel="stylesheet" />
    <link href="~/Content/angular-grid.css" rel="stylesheet" />
    <script src="~/Scripts/angular-grid.js"></script>
    <link href="~/Content/theme-fresh.css" rel="stylesheet" />
    <script src="~/Scripts/jquery.clear.input.js"></script>
    <link href="~/Content/bootstrap-flat.min.css" rel="stylesheet" />
    <link href="~/Content/style.css" rel="stylesheet" />
    <script src="~/Scripts/moment.min.js"></script>
    <script src="~/Scripts/UsefulFunctions.js"></script>
    <script src="~/Scripts/angular-animate.min.js"></script> 
    <link href="~/Content/jquery.timeentry.css" rel="stylesheet" />
    <script src="~/Scripts/jquery.plugin.min.js"></script>
    <script src="~/Scripts/jquery.timeentry.min.js"></script>
    <script src="~/Scripts/signature_pad.min.js"></script> 
    <link href="~/Content/isteven-multi-select.css" rel="stylesheet" />
    <script src="~/Scripts/isteven-multi-select.js"></script>
    <script type="text/javascript">
        var visitID = @Html.Raw(ViewBag.visitID);
    </script>   
    <script src="~/Scripts/appEngineer.js"></script>
</head>
<body ng-controller="VisitRegistrationController">
    <!--Layout Start-->
    <div class="container-fluid" style="padding-top: 15px; height: 100%;" data-ng-init="init()">

        <!--Loader Start-->
        <div class="slider2 slide-in2 fadeout" ng-show="ShowLoader" ng-animate="slide" style="background-color: #fff;">
            <div class="outer">
                <div class="middle">
                    <div class="inner">
                        <center>
                            <img src="~/Content/Resources/preloader.gif" />
                            <img src="~/Content/Resources/EGT-logo-wt.png" style="width: 115px; height: 55px;" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
        <!--Loader End-->

        <!--Company Start-->
        <form class="form-inline" style="margin-bottom: 130px; width: 100%; height: 10%;">
            <textarea class="form-control" rows="1" style="width: 100%; margin-bottom: 10px; resize: none;" ng-model="Comment" placeholder="ვიზიტის კომენტარი..."></textarea>

            <div class="input-group input-group-lg" style="width: 100%;">
                <span class="input-group-addon" style="width: 200px !important; text-align: left;"><i class="fa fa-building-o"></i> კაზინო:</span>
                <input type="text" style="width: 100%;" ng-model="selectedSubContragent" typeahead="subContragent as subContragent.name for subContragent in subContragents | filter:{name:$viewValue}" class="form-control" ng-change="ValidateSelectedSubContragent()" ng-disabled="blockControl">
                <span class="input-group-addon" style="width: 50% !important; text-align: left;"><i class="fa fa-map-o"></i> კომპანია: {{selectedContragent.name}}</span>
            </div>

            <div class="input-group input-group-lg" style="width: 100%; margin-top: 15px;" ng-show="ValidateSelectedSubContragent()">
                <div style="padding: 5px;">
                    <b>სტატუსი:</b>

                    <span style="border: 1px solid #cccccc; padding: 10px; margin-left: 30px;" id="box1">
                        <label>
                            <input type="checkbox" ng-model="asPerContract" ng-disabled="blockControl" ng-change="ValidateCheckBoxes1()" />
                            ხელშეკრულებით
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="rent" ng-disabled="blockControl" ng-change="ValidateCheckBoxes1()" />
                            იჯარა
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="sales" ng-disabled="blockControl" ng-change="ValidateCheckBoxes1()" />
                            გაყიდული
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="other1" ng-disabled="blockControl" ng-change="ValidateCheckBoxes1()" />
                            სხვა
                        </label>
                    </span>

                    <span style="border: 1px solid #cccccc; padding: 10px; margin-left: 30px;" id="box2">
                        <label>
                            <input type="checkbox" ng-model="inOffice" ng-disabled="blockControl" ng-change="ValidateCheckBoxes2()" />
                            ოფისში
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="onSite" ng-disabled="blockControl" ng-change="ValidateCheckBoxes2()" />
                            კლიენტთან
                        </label>
                    </span>

                    <span style="border: 1px solid #cccccc; padding: 10px; margin-left: 30px;" id="box3">
                        <label>
                            <input type="checkbox" ng-model="warranty" ng-disabled="blockControl" ng-change="ValidateCheckBoxes3()" />
                            გარანტია
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="postWarranty" ng-disabled="blockControl" ng-change="ValidateCheckBoxes3()" />
                            გარანტიის შემდგომ
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="other2" ng-disabled="blockControl" ng-change="ValidateCheckBoxes3()" />
                            სხვა
                        </label>
                    </span>
                </div>


                <div style="margin-top: 15px; padding: 5px;">
                    <b>გადახდა:</b>

                    <span style="border: 1px solid #cccccc; padding: 10px; margin-left: 33px;" id="box4">
                        <label>
                            <input type="checkbox" ng-model="toAccount" ng-disabled="blockControl" ng-change="ValidateCheckBoxes4()" />
                            საბანკო გადარიცხვა
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="paymentOnDelivery" ng-disabled="blockControl" ng-change="ValidateCheckBoxes4()" />
                            გადახდა მიღებისას
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="paid" ng-disabled="blockControl" ng-change="ValidateCheckBoxes4()" />
                            გადახდილია
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="warrantyPay" ng-disabled="blockControl" ng-change="ValidateCheckBoxes4()" />
                            გარანტია
                        </label>

                        <label style="margin-left: 30px;">
                            <input type="checkbox" ng-model="rentPay" ng-disabled="blockControl" ng-change="ValidateCheckBoxes4()" />
                            იჯარა
                        </label>
                    </span>
                </div>
            </div>
        </form>
        <!--Company End-->

        <!--Filled Equipments Start-->
        <form class="form-inline" ng-show="ValidateSelectedSubContragent()" style="height: 50%;">
            <div class="input-group input-group-lg" style="width: 100%;">
                <a class="btn btn-lg btn-primary" style="width: 200px !important;" ng-click="blockControl ? null : OpenEquipmentsLayout()" ng-disabled="blockControl"><i class="fa fa-sitemap"></i> ახალი პროცესი</a>
                <a class="btn btn-lg btn-primary" style="width: 200px !important; margin-left: 15px;" ng-click="blockBtnProtocol ? null : OpenProtocolsLayout()" ng-disabled="blockBtnProtocol"><i class="fa fa-book"></i> მრიცხველები</a>

                <a class="btn btn-lg btn-default" style="float: right; margin-left: 15px; width: 240px;" ng-click="blockControl ? null : ClearSignatures()" ng-disabled="blockControl"><i class="fa fa-ban"></i> ხელმოწერების ამოშლა</a>
                <a class="btn btn-lg btn-default" style="float: right; width: 240px;" ng-click="blockControl ? null : SendEmailToContragent()" ng-disabled="blockControl"><i class="fa fa-envelope-o"></i> ელ-ფოსტაზე გაგზავნა</a>              
            </div>

            <div style="margin-top: 10px;">
                <div class="input-group input-group-lg" style="width: 150px;">
                    <span class="input-group-addon" style="text-align: left;">დაწყების დრო:</span>
                    <input id="visitDate" ng-disabled="blockControl" style="width: 150px;" ng-click="blockControl ? null : openDatepickerVisit($event)" type="text" class="form-control input-lg" datepicker-options="dateOptionsVisit" datepicker-popup="yyyy-MM-dd" ng-model="visitDate" is-open="date_opened_visit" on-open-focus="false" close-text="დახურვა" clear-text="გასუფთავება" current-text="დღეს">                  
                </div>
                <input type="text" id="startTime" class="form-control input-lg" style="width: 100px;" ng-disabled="blockControl" ng-model="startTime" />

                <input type="text" id="endTime" class="form-control input-lg" style="width: 100px; float: right; margin-right: 46px; margin-left: 4px;" ng-disabled="blockControl" ng-model="endTime" />
                <div class="input-group input-group-lg" style="width: 150px; float: right;">
                    <span class="input-group-addon" style="text-align: left;">დასრულების დრო:</span>
                    <input id="visitDate2" ng-disabled="blockControl" style="width: 150px;" ng-click="blockControl ? null : openDatepickerVisit2($event)" type="text" class="form-control input-lg" datepicker-options="dateOptionsVisit" datepicker-popup="yyyy-MM-dd" ng-model="visitDate2" is-open="date_opened_visit2" on-open-focus="false" close-text="დახურვა" clear-text="გასუფთავება" current-text="დღეს">
                </div>                
            </div>

            <div style="height: 100%; overflow-y: auto; margin-top: 10px;">              
                <div ng-repeat="visitProcess in visitProcesses | filter:FilterNotDeleted">
                    <table class="table table-bordered table-striped table-hover" ng-show="showGeneratedTable" style="width: 100% !important;">
                        <thead>
                            <tr style="background-color: #EEEEEE;">
                                <td>
                                    <a class="btn btn-sm btn-default" ng-click="blockControl ? null : EditVisitProcess(visitProcess)" ng-disabled="blockControl"><i class="fa fa-edit"></i></a>
                                    მოწყობილობაზე ჩატარებული მოქმედება
                                </td>
                                <td style="width: 30%;">
                                    მოქმედების კომენტარი
                                </td>
                                <td style="width: 45px;">
                                    <a class="btn btn-sm btn-danger" ng-click="blockControl ? null : RemoveVisitProcess($index)" ng-disabled="blockControl"><i class="fa fa-trash"></i></a>
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="generatedResult in visitProcess.generatedResults | filter:FilterNotDeleted | filter:FilterGeneratedResult track by $index">
                                <td>
                                    {{generatedResult.Text}}
                                </td>
                                <td>
                                    {{generatedResult.Comment}}
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table table-bordered table-striped table-hover" style="width: 100% !important; margin-top: -15px;">
                        <thead>
                            <tr style="background-color: #EEEEEE;">
                                <td>
                                    კატეგორია
                                </td>
                                <td>
                                    ქვე-კატეგორია
                                </td>
                                <td>
                                    სერია
                                </td>
                                <td style="width: 100px;">
                                    კოდი
                                </td>
                                <td style="width: 150px;">
                                    ფასდაკლება
                                </td>
                                <td style="width: 150px;">
                                    დოლარი (USD)
                                </td>
                                <td style="width: 150px;">
                                    ევრო (EUR)
                                </td>
                                <td style="width: 150px;">
                                    ლარი (GEL) დღგ-ს ჩათვლით
                                </td>
                                <td style="width: 20%;">
                                    საწყობი
                                </td>
                                <td style="width: 20%;">
                                    მოქმედების ტიპი
                                </td>
                                <td style="width: 100px;">
                                    ერთეული
                                </td>
                                <td style="width: 150px;">
                                    რაოდენობა
                                </td>
                                <td style="width: 150px;">
                                    ჯამი (GEL) დღგ-ს ჩათვლით
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="visitProcessProduct in visitProcess.visitProcessProducts | filter:FilterNotDeleted track by $index">
                                <td>
                                    {{visitProcessProduct.ProductName}}
                                </td>
                                <td>
                                    {{visitProcessProduct.subActionItemName}}
                                </td>
                                <td>
                                    {{visitProcessProduct.NewSeries}}
                                </td>
                                <td>
                                    {{visitProcessProduct.productCode}}
                                </td>
                                <td>
                                    {{visitProcessProduct.discount}}%
                                </td>
                                <td>
                                    {{visitProcessProduct.PriceUSD}}
                                </td>
                                <td>
                                    {{visitProcessProduct.PriceEUR}}
                                </td>
                                <td>
                                    {{visitProcessProduct.PriceGEL}}
                                </td>
                                <td>
                                    <div class="btn-group" dropdown style="width: 100%;">
                                        @*<button style="width: 100%;" type="button" class="btn btn-sm btn-default" dropdown-toggle ng-disabled="true">
                                            {{GetStoreName(visitProcessProduct.StoreId)}} <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                                            <li ng-repeat="store in stores" role="menuitem"><a>{{store.Name}}</a></li>
                                        </ul>*@

                                        {{GetStoreName(visitProcessProduct.StoreId)}}
                                    </div>
                                </td>
                                <td>
                                    <div class="btn-group" dropdown style="width: 100%;">
                                        @*<button style="width: 100%;" type="button" class="btn btn-sm btn-default" dropdown-toggle ng-disabled="true">
                                            {{saleTypes[visitProcessProduct.SaleTypeID]}} <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                                            <li ng-repeat="saleType in saleTypes" role="menuitem"><a>{{saleType}}</a></li>
                                        </ul>*@

                                        {{visitProcessProduct.SaleTypeID === 6 ? 'მომსახურების გაწევა' : saleTypes[visitProcessProduct.SaleTypeID]}}
                                    </div>
                                </td>
                                <td>
                                    {{visitProcessProduct.unitName}}
                                </td>
                                <td>
                                    @*<input class="form-control input-sm" style="width: 100%;" ng-model="visitProcessProduct.Amount" readonly />*@

                                    {{visitProcessProduct.Amount}}
                                </td>
                                <td>
                                    @*<input class="form-control input-sm" style="width: 100%;" ng-model="visitProcessProduct.total" readonly />*@

                                    {{visitProcessProduct.total}}
                                </td>
                            </tr>

                            <tr style="background-color: #f2f2f2;">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>{{visitProcess.visitProcessProducts.Sum('total')}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>            
        </form>
        <!--Filled Equipments End-->

        <!--Equipments Layout Start-->
        <div class="slider slide-in fadeout" ng-show="ShowEquipmentsLayout" ng-animate="slide">
            <div class="container-fluid" style="padding-top: 20px; padding-bottom: 135px; height: 100% !important;">
                <div class="list-group" style="height: 100% !important; margin-left: -15px; margin-right: -15px;">
                    <div class="col-lg-3"><pre class="alert alert-info"><i class="fa fa-cubes"></i> მოწყობილობის ჯგუფები</pre></div>
                    <div class="col-lg-3"><pre class="alert alert-info"><i class="fa fa-cube"></i> მოწყობილობები</pre></div>
                    <div class="col-lg-6"><pre class="alert alert-info"><i class="fa fa-check-circle"></i> არჩეული მოწყობილობები</pre></div>



                    <div class="col-lg-3" style="overflow-y: auto !important; height: 100% !important;">
                        <input class="input-lg form-control" style="margin-bottom: 10px;" ng-model="searchEquipmentGroup" />
                        <a class="list-group-item" ng-repeat="equipmentGroup in equipmentGroups | filter: searchEquipmentGroup" ng-click="GetEquipmentsByGroup(equipmentGroup)" style="width: 100% !important;">
                            {{equipmentGroup.Name}} <input type="checkbox" ng-model="equipmentGroup.checked" style="float: right;" />
                        </a>
                    </div>

                    <div class="col-lg-3" style="overflow-y: auto !important; height: 100% !important;">
                        <input class="input-lg form-control" style="margin-bottom: 10px;" ng-model="searchEquipment" />
                        <a class="list-group-item" ng-repeat="equipment in equipments | filter: searchEquipment" ng-click="ChooseEquipment(equipment)" style="width: 100% !important;">
                            {{equipment.Name}} <input type="checkbox" ng-model="equipment.checked" style="float: right;" />
                        </a>
                    </div>

                    <div class="col-lg-6" style="overflow-y: auto !important; height: 100% !important;">
                        <table class="table table-bordered table-striped table-hover" ng-show="showChosenEquipmentsTable" style="width: 100% !important;">
                            <thead>
                                <tr style="background-color: #EEEEEE;">
                                    <td>
                                        დასახელება
                                    </td>
                                    <td>
                                        სერია
                                    </td>
                                    <td>
                                        დრო
                                    </td>
                                    <td style="width: 50px;"></td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="chosenEquipment in chosenEquipments | filter:FilterNotDeleted track by $index" ng-click="ChooseEquipment(chosenEquipment, $index)">
                                    <td>
                                        {{chosenEquipment.Name}}
                                    </td>
                                    <td>
                                        {{chosenEquipment.EquipmentSeries}}
                                    </td>
                                    <td>
                                        {{chosenEquipment.DoorOpenDate + ' ' + chosenEquipment.DoorOpenTime}}
                                    </td>
                                    <td>
                                        <center>
                                            <a class="btn btn-sm btn-danger" ng-click="ChooseEquipment(undefined, $index, $event)"><i class="fa fa-trash"></i></a>
                                        </center>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <a class="btn btn-lg btn-primary" style="position: absolute; bottom: 0; left: 0; width: 150px;" ng-click="CloseEquipmentsLayout()"><i class="fa fa-backward"></i> უკან</a>
            <a class="btn btn-lg btn-primary" style="position: absolute; bottom: 0; right: 0; width: 150px;" ng-click="OpenActionsLayout()">შემდეგ <i class="fa fa-forward"></i></a>
        </div>
        <!--Equipments Layout End-->

        <!--Actions Layout Start-->
        <div class="slider slide-in fadeout" ng-show="ShowActionsLayout" ng-animate="slide">
            <div class="container-fluid" style="padding-top: 20px; padding-bottom: 125px; height: 100% !important;">
                <div class="list-group" style="height: 60% !important; margin-left: -15px; margin-right: -15px;">
                    <div class="col-lg-3"><pre class="alert alert-info"><i class="fa fa-check-circle"></i> არჩეული მოწყობილობები</pre></div>
                    <div class="col-lg-3"><pre class="alert alert-info"><i class="fa fa-cubes"></i> მოქმედებები</pre></div>
                    <div class="col-lg-3"><pre class="alert alert-info"><i class="fa fa-cube"></i> კატეგორიები</pre></div>
                    <div class="col-lg-3"><pre class="alert alert-info"><i class="fa fa-cogs"></i> ქვე-კატეგორიები</pre></div>



                    <div class="col-lg-3" style="overflow-y: auto !important; height: 75% !important;">
                        <table class="table table-bordered table-striped table-hover" ng-show="showChosenEquipmentsTable" style="width: 100% !important;">
                            <thead>
                                <tr style="background-color: #EEEEEE;">
                                    <td style="width: 50px;">
                                        <center>
                                            <input type="checkbox" ng-click="CheckAllChosenEquipments(chosenEquipments)" ng-model="allChosenEquipmentsChecked" />
                                        </center>
                                    </td>
                                    <td>
                                        დასახელება
                                    </td>
                                    <td>
                                        სერია
                                    </td>
                                    <td>
                                        დრო
                                    </td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="chosenEquipment in chosenEquipments | filter:FilterNotDeleted track by $index" ng-click="ChooseEquipmentForAction(chosenEquipment)">
                                    <td>
                                        <center>
                                            <input type="checkbox" ng-click="CheckChosenEquipment(chosenEquipment)" ng-model="chosenEquipment.checked" />
                                        </center>
                                    </td>
                                    <td>
                                        {{chosenEquipment.Name}}
                                    </td>
                                    <td>
                                        {{chosenEquipment.EquipmentSeries}}
                                    </td>
                                    <td>
                                        {{chosenEquipment.DoorOpenDate + ' ' + chosenEquipment.DoorOpenTime}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="col-lg-3" style="overflow-y: auto !important; height: 75% !important;">
                        <input class="input-lg form-control" style="margin-bottom: 10px;" ng-model="searchAction" />
                        <a class="list-group-item" ng-repeat="action in actions | filter: searchAction" ng-click="GetActionItemsByAction(action)" style="width: 100% !important;">
                            {{action.Name}} <input type="checkbox" ng-model="action.checked" style="float: right;" />
                        </a>
                    </div>

                    <div class="col-lg-3" style="overflow-y: auto !important; height: 75% !important;">
                        <input class="input-lg form-control" style="margin-bottom: 10px;" ng-model="searchActionItem" />
                        <a class="list-group-item" ng-repeat="actionItem in actionItems | filter: searchActionItem" ng-click="ChooseActionItem(actionItem)" style="width: 100% !important;">
                            {{actionItem.Name}} <input type="checkbox" ng-model="actionItem.checked" style="float: right;" />
                        </a>
                    </div>

                    <div class="col-lg-3" style="overflow-y: auto !important; height: 75% !important;">
                        <input class="input-lg form-control" style="margin-bottom: 10px;" ng-model="searchSubActionItem" />
                        <a class="list-group-item" ng-repeat="subActionItem in subActionItems | filter: searchSubActionItem" ng-click="ChooseSubActionItem(subActionItem)" style="width: 100% !important;">
                            {{subActionItem.name}} <input type="checkbox" ng-model="subActionItem.checked" style="float: right;" />
                        </a>
                    </div>
                </div>



                <div style="height: 45%; overflow-y: auto;">
                    <tabset>
                        <tab>
                            <tab-heading><a class="badge">{{GeneratedResultsLength()}}</a> მოქმედებები</tab-heading>
                            <table class="table table-bordered table-striped table-hover" ng-show="showFinalResultsTable" style="width: 100% !important; margin-top: 5px;">
                                <thead>
                                    <tr style="background-color: #EEEEEE;">
                                        <td>
                                            მოწყობილობაზე ჩატარებული მოქმედება
                                        </td>
                                        <td style="width: 30%;">
                                            მოქმედების კომენტარი
                                        </td>
                                        <td style="width: 50px;"></td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="generatedResult in generatedResults | filter:FilterNotDeleted | filter:FilterGeneratedResult track by $index">
                                        <td>
                                            {{generatedResult.Text}}
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" ng-model="generatedResult.Comment" />
                                        </td>
                                        <td>
                                            <center>
                                                <a class="btn btn-sm btn-danger" ng-click="RemoveGeneratedResult(generatedResult.fakeId, $index)"><i class="fa fa-trash"></i></a>
                                            </center>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </tab>


                        <tab>
                            <tab-heading><a class="badge">{{VisitProcessProductsLength()}}</a> სასაქონლო სია</tab-heading>
                            <a class="btn btn btn-primary" ng-click="AddProvidedService()" style="margin: 5px 0 5px 0;"><i class="fa fa-wrench"></i> მომსახურება</a>
                            <a class="btn btn btn-primary" ng-click="AddProduct()" style="margin: 5px 0 5px 10px;"><i class="fa fa-anchor"></i> მასალა</a>
                            <table class="table table-bordered table-striped table-hover" ng-show="showFinalResultsTable" style="width: 100% !important;">
                                <thead>
                                    <tr style="background-color: #EEEEEE;">
                                        <td>
                                            კატეგორია
                                        </td>
                                        <td>
                                            ქვე-კატეგორია
                                        </td>
                                        <td>
                                            სერია
                                        </td>
                                        <td style="width: 100px;">
                                            კოდი
                                        </td>
                                        <td style="width: 150px;">
                                            ფასდაკლება
                                        </td>                                        
                                        <td style="width: 150px;">
                                            დოლარი (USD)
                                        </td>
                                        <td style="width: 150px;">
                                            ევრო (EUR)
                                        </td>
                                        <td style="width: 150px;">
                                            ლარი (GEL) დღგ-ს ჩათვლით
                                        </td>
                                        <td style="width: 20%;">
                                            საწყობი
                                        </td>
                                        <td style="width: 20%;">
                                            მოქმედების ტიპი
                                        </td>
                                        <td style="width: 100px;">
                                            ერთეული
                                        </td>
                                        <td style="width: 150px;">
                                            რაოდენობა
                                        </td>
                                        <td style="width: 150px;">
                                            ჯამი (GEL) დღგ-ს ჩათვლით
                                        </td>
                                        <td style="width: 50px;"></td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="visitProcessProduct in visitProcessProducts | filter:FilterNotDeleted track by $index">
                                        <td>
                                            {{visitProcessProduct.ProductName}}
                                        </td>
                                        <td>
                                            {{visitProcessProduct.subActionItemName}}
                                        </td>
                                        <td>
                                            {{visitProcessProduct.NewSeries}}
                                        </td>
                                        <td>
                                            {{visitProcessProduct.productCode}}
                                        </td>
                                        <td>
                                            {{visitProcessProduct.discount}}%
                                        </td>
                                        <td>
                                            {{visitProcessProduct.PriceUSD}}
                                        </td>
                                        <td>
                                            {{visitProcessProduct.PriceEUR}}
                                        </td>
                                        <td>
                                            {{visitProcessProduct.PriceGEL}}
                                        </td>
                                        <td>
                                            <div class="btn-group" dropdown style="width: 100%;" ng-hide="HideWithoutStore(visitProcessProduct.StoreId)">
                                                @*<button style="width: 100%;" type="button" class="btn btn-sm btn-default" dropdown-toggle>
                                                    {{GetStoreName(visitProcessProduct.StoreId)}} <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                                                    <li ng-repeat="store in stores" role="menuitem" ng-click="SelectStore(store.Id, visitProcessProduct)"><a>{{store.Name}}</a></li>
                                                </ul>*@

                                                {{GetStoreName(visitProcessProduct.StoreId)}}
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group" dropdown style="width: 100%;">
                                                @*<button style="width: 100%;" type="button" class="btn btn-sm btn-default" dropdown-toggle ng-disabled="ValidateVisitProcessProducts(visitProcessProduct)">
                                                    {{saleTypes[visitProcessProduct.SaleTypeID]}} <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                                                    <li ng-repeat="saleType in saleTypes" role="menuitem" ng-click="SelectSaleType($index, visitProcessProduct)"><a>{{saleType}}</a></li>
                                                </ul>*@

                                                {{visitProcessProduct.SaleTypeID === 6 ? 'მომსახურების გაწევა' : saleTypes[visitProcessProduct.SaleTypeID]}}
                                            </div>
                                        </td>
                                        <td>
                                            {{visitProcessProduct.unitName}}
                                        </td>
                                        <td>
                                            @*<input class="form-control input-sm" style="width: 100%;" ng-model="visitProcessProduct.Amount" ng-change="ChangeProductPrice($index)" ng-readonly="ValidateVisitProcessProducts(visitProcessProduct)" />*@

                                            {{visitProcessProduct.Amount}}
                                        </td>
                                        <td>
                                            @*<input class="form-control input-sm" style="width: 100%;" ng-model="visitProcessProduct.total" ng-readonly="true" />*@

                                            {{visitProcessProduct.total}}
                                        </td>
                                        <td>
                                            <center>
                                                <a class="btn btn-sm btn-danger" ng-click="RemoveVisitProcessProduct($index)"><i class="fa fa-trash"></i></a>
                                            </center>
                                        </td>
                                    </tr>

                                    <tr style="background-color: #f2f2f2;">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>{{visitProcessProducts.Sum('total')}}</td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </tab>
                    </tabset>
                </div>
            </div>
            <a class="btn btn-lg btn-primary" style="position: absolute; bottom: 0; left: 0; width: 150px;" ng-click="CloseActionsLayout()"><i class="fa fa-backward"></i> უკან</a>
            <a class="btn btn-lg btn-success" style="position: absolute; bottom: 0; right: 0; width: 200px;" ng-click="FinishProcess()">დასრულება <i class="fa fa-check"></i></a>
        </div>
        <!--Actions Layout End-->

        <!--Visit Signature Layout Start-->
        <div class="slider1 slide-in1 fadeout" style="background-color: #fff;" ng-show="ShowVisitSignatureLayout" ng-animate="slide">
            <div style="background-color: #EEEEEE; height: 32px; border: 1px solid #cccccc;" class="form-inline">
                <label style="margin: 5px 0 0 5px;">კომპანია "{{selectedContragent.name}}" -ს წარმომადგენელი "{{clientFullName}}"</label>
                <a class="btn btn-sm btn-default" style="float: right;" ng-click="ClearContragentSignature()"><i class="fa fa-trash"></i></a>
            </div>
            <canvas id="contragentSignature"></canvas>

            <div style="background-color: #EEEEEE; height: 32px; border: 1px solid #cccccc;" class="form-inline">
                <label style="margin: 5px 0 0 5px;">კომპანია "შპს ევრო გეიმს ტექნოლოჯი ჯორჯია" -ს წარმომადგენელი "{{userName}}"</label>
                <a class="btn btn-sm btn-default" style="float: right;" ng-click="ClearUserSignature()"><i class="fa fa-trash"></i></a>
            </div>
            <canvas id="userSignature"></canvas>

            <a class="btn btn-lg btn-primary" style="position: fixed; bottom: 0; right: 170px; width: 150px;" ng-click="SaveAndCloseVisitSignatureLayout()"><i class="fa fa-check"></i> დამატება</a>
            <a class="btn btn-lg btn-danger" style="position: fixed; bottom: 0; right: 0; width: 150px;" ng-click="ShowVisitSignatureLayout = false"><i class="fa fa-close"></i> დახურვა</a>
        </div>
        <!--Visit Signature Layout End-->

        <!--Visit PreSignature Layout Start-->
        <div class="slider2 slide-in2 fadeout" style="background-color: #fff;" ng-show="ShowVisitPreSignatureLayout" ng-animate="slide">
            <div class="container-fluid" style="margin-top: 20px; height: 90% !important; overflow-y: auto;">
                <input class="input-lg form-control" placeholder="შეიყვანეთ სახელი და გვარი" style="margin-bottom: 20px;" id="txtClientFullName" ng-model="clientFullName" />

                <p>იმ შემთხვევებში, როდესაც დაზიანებული ნაწილი ექვემდებარება შეკეთებას, - კლიენტის მხრიდან შეკეთებაზე უარის გაცხადებისას, გადასახდელი ექნება დიაგნოსტიკის საფასური. ყველა ნაწილი შემოწმებულია, მუშა მდგომარეობაშია და ყველა პარამეტრი დაყენებულია კლიენტის მოთხოვნისამებრ.</p>

                <div ng-repeat="visitProcess in visitProcesses | filter:FilterNotDeleted" style="margin-bottom: 35px;">
                    <table class="table table-bordered table-striped table-hover" style="width: 100% !important;">
                        <thead>
                            <tr style="background-color: #EEEEEE;">
                                <td>
                                    ჩატარებული სამუშაო
                                </td>
                                <td style="width: 30%;">
                                    მოქმედების კომენტარი
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="generatedResult in visitProcess.generatedResults | filter:FilterNotDeleted | filter:FilterGeneratedResult track by $index">
                                <td>
                                    {{generatedResult.Text}}
                                </td>
                                <td>
                                    {{generatedResult.Comment}}
                                </td>
                            </tr>
                        </tbody>
                    </table>    
                    
                    <p>გამოყენებული მასალა, გაწეული მომსახურებები</p>                

                    <table class="table table-bordered table-striped table-hover" style="width: 100% !important;">
                        <thead>
                            <tr style="background-color: #EEEEEE;">
                                <td>
                                    კატეგორია
                                </td>
                                <td>
                                    ქვე-კატეგორია
                                </td>
                                <td>
                                    სერია
                                </td>
                                <td style="width: 100px;">
                                    კოდი
                                </td>
                                <td style="width: 150px;">
                                    ფასდაკლება
                                </td>
                                <td style="width: 150px;">
                                    ლარი (GEL) დღგ-ს ჩათვლით
                                </td>
                                <td style="width: 20%;">
                                    საწყობი
                                </td>
                                <td style="width: 20%;">
                                    მოქმედების ტიპი
                                </td>
                                <td style="width: 100px;">
                                    ერთეული
                                </td>
                                <td style="width: 150px;">
                                    რაოდენობა
                                </td>
                                <td style="width: 150px;">
                                    ჯამი (GEL) დღგ-ს ჩათვლით
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="visitProcessProduct in visitProcess.visitProcessProducts | filter:FilterNotDeleted track by $index">
                                <td>
                                    {{visitProcessProduct.ProductName}}
                                </td>
                                <td>
                                    {{visitProcessProduct.subActionItemName}}
                                </td>
                                <td>
                                    {{visitProcessProduct.NewSeries}}
                                </td>
                                <td>
                                    {{visitProcessProduct.productCode}}
                                </td>
                                <td>
                                    {{visitProcessProduct.discount}}%
                                </td>
                                <td>
                                    {{visitProcessProduct.PriceGEL}}
                                </td>
                                <td>
                                    <div class="btn-group" dropdown style="width: 100%;">
                                        @*<button style="width: 100%;" type="button" class="btn btn-sm btn-default" dropdown-toggle ng-disabled="true">
                                            {{GetStoreName(visitProcessProduct.StoreId)}} <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                                            <li ng-repeat="store in stores" role="menuitem"><a>{{store.Name}}</a></li>
                                        </ul>*@

                                        {{GetStoreName(visitProcessProduct.StoreId)}}
                                    </div>
                                </td>
                                <td>
                                    <div class="btn-group" dropdown style="width: 100%;">
                                        @*<button style="width: 100%;" type="button" class="btn btn-sm btn-default" dropdown-toggle ng-disabled="true">
                                            {{saleTypes[visitProcessProduct.SaleTypeID]}} <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                                            <li ng-repeat="saleType in saleTypes" role="menuitem"><a>{{saleType}}</a></li>
                                        </ul>*@

                                        {{visitProcessProduct.SaleTypeID === 6 ? 'მომსახურების გაწევა' : saleTypes[visitProcessProduct.SaleTypeID]}}
                                    </div>
                                </td>
                                <td>
                                    {{visitProcessProduct.unitName}}
                                </td>
                                <td>
                                    @*<input class="form-control input-sm" style="width: 100%;" ng-model="visitProcessProduct.Amount" readonly />*@

                                    {{visitProcessProduct.Amount}}
                                </td>
                                <td>
                                    @*<input class="form-control input-sm" style="width: 100%;" ng-model="visitProcessProduct.total" readonly />*@

                                    {{visitProcessProduct.total}}
                                </td>
                            </tr>

                            <tr style="background-color: #f2f2f2;">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>{{visitProcess.visitProcessProducts.Sum('total')}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>                
            </div>

            <a class="btn btn-lg btn-primary" style="position: fixed; bottom: 0; right: 170px; width: 150px;" ng-click="OpenVisitSignatureLayout()"><i class="fa fa-check"></i> OK</a>
            <a class="btn btn-lg btn-danger" style="position: fixed; bottom: 0; right: 0; width: 150px;" ng-click="ShowVisitPreSignatureLayout = false"><i class="fa fa-close"></i> დახურვა</a>
        </div>
        <!--Visit PreSignature Layout End-->

        <!--Protocol PreSignature Layout Start-->
        <div class="slider2 slide-in2 fadeout" style="background-color: #fff;" ng-show="ShowProtocolPreSignatureLayout" ng-animate="slide">
            <div class="container-fluid" style="margin-top: 20px; height: 90% !important; overflow-y: auto;">
                <div class="table-responsive" style="padding-bottom: 35px;">
                    <table class="table table-bordered table-hover table-striped" style="width: 1800px !important;">
                        <thead>
                            <tr>
                                <th rowspan="2" style="text-align: center;">სტატუსი</th>
                                <th rowspan="2" style="text-align: center; width: 110px;">კაზინოს <br /> N</th>
                                <th rowspan="2" style="text-align: center; width: 110px;">სერიული <br /> N</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">პლატფორმის <br /> N</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">პლომბის <br /> N</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">BET</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">WIN</th>
                                <th colspan="2" style="text-align: center; width: 320px;">ელექტრონული მრიცხველები</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">GAMES</th>
                                <th colspan="2" style="text-align: center; width: 320px;">მექანიკური მრიცხველები</th>
                            </tr>
                            <tr>
                                <th style="text-align: center; width: 160px;">IN</th>
                                <th style="text-align: center; width: 160px;">OUT</th>
                                <th style="text-align: center; width: 160px;">IN</th>
                                <th style="text-align: center; width: 160px;">OUT</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="subProtocol in protocol.subProtocols | filter:FilterNotDeleted">
                                <td><input type="text" class="form-control" ng-model="subProtocolStatuses[subProtocol.status]" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.casinoNumber" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.serialNumber" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.platformNumber" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.plombNumber" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.bet" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.win" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.electricIn" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.electricOut" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.games" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.mechanicIn" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.mechanicOut" readonly /></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <a class="btn btn-lg btn-primary" style="position: fixed; bottom: 0; right: 170px; width: 150px;" ng-click="OpenProtocolSignatureLayout()"><i class="fa fa-check"></i> OK</a>
            <a class="btn btn-lg btn-danger" style="position: fixed; bottom: 0; right: 0; width: 150px;" ng-click="ShowProtocolPreSignatureLayout = false"><i class="fa fa-close"></i> დახურვა</a>
        </div>
        <!--Protocol PreSignature Layout End-->

        <!--Protocols layout start-->
        <div class="slider slide-in fadeout" ng-show="ShowProtocolLayout" ng-animate="slide">
            <div class="container-fluid" style="height: 30%;">
                <h3 style="text-align: center; margin-top: 5px; margin-bottom: -10px;">მრიცხველები</h3>
                <h4 style="margin-bottom: 20px;">"ევრო გეიმს ტექნოლოჯი ჯორჯია"</h4>

                <div class="col-lg-6" style="padding-left: 0 !important; margin-bottom: 5px; overflow-y: auto;">
                    <div class="input-group" style="width: 100%; margin-bottom: 7px;">
                        <span class="input-group-addon" style="width: 180px; text-align: left;">კომპანია:</span>
                        <input type="text" class="form-control" style="width: 100%;" ng-model="selectedSubContragent.contragent.name" ng-disabled="blockControl" />
                    </div>
                    <div class="input-group" style="width: 100%; margin-bottom: 7px;">
                        <span class="input-group-addon" style="width: 180px; text-align: left;">მისამართი:</span>
                        <input type="text" class="form-control" style="width: 100%;" ng-disabled="blockControl" />
                    </div>
                    <div class="input-group" style="width: 100%; margin-bottom: 7px;">
                        <span class="input-group-addon" style="width: 180px; text-align: left;">კაზინოს დასახელება:</span>
                        <input type="text" class="form-control" style="width: 100%;" ng-model="selectedSubContragent.name" ng-disabled="blockControl" />
                    </div>
                    <div class="input-group" style="width: 100%; margin-bottom: 7px;">
                        <span class="input-group-addon" style="width: 180px; text-align: left;">აპარატის ტიპები:</span>
                        <isteven-multi-select input-model="equipmentTypes" output-model="selectedEquipmentTypes" on-item-click="ManageSelectedEquipmentTypes()" disable-property="disabled" button-label="name" item-label="name" tick-property="ticked"></isteven-multi-select>
                    </div>
                </div>

                <div class="col-lg-6" style="padding-right: 0 !important; margin-bottom: 5px; overflow-y: auto;">
                    <div class="input-group" style="width: 100%; margin-bottom: 7px;">
                        <span class="input-group-addon" style="width: 180px; text-align: left;">N:</span>
                        <input type="text" class="form-control" style="width: 250px;" ng-model="id" disabled />
                    </div>
                    <div class="input-group" style="width: 98%;  margin-bottom: 7px;">
                        <span class="input-group-addon" style="width: 180px; text-align: left;">თარიღი:</span>
                        <input ng-disabled="blockControl" ng-click="blockControl ? null : openDatepicker($event)" type="text" class="form-control" datepicker-options="dateOptions" datepicker-popup="yyyy-MM-dd" ng-model="protocol.date" is-open="date_opened" on-open-focus="false" close-text="დახურვა" clear-text="გასუფთავება" current-text="დღეს">
                    </div>
                    <div class="input-group" style="width: 100%; margin-bottom: 7px;">
                        <span class="input-group-addon" style="width: 180px; text-align: left;">პროგრამის ვერსიები:</span>
                        <isteven-multi-select input-model="programVersions" output-model="selectedProgramVersions" on-item-click="ManageSelectedProgramVersions()" disable-property="disabled" button-label="name" item-label="name" tick-property="ticked"></isteven-multi-select>
                    </div>
                </div>
            </div>

            <div style="height: 58%; overflow-y: auto; width: 100%; padding-left: 15px; padding-right: 15px;">
                <div class="table-responsive" style="padding-bottom: 50px;">
                    <table class="table table-bordered table-hover table-striped" style="width: 1800px !important;">
                        <thead>
                            <tr>
                                <th rowspan="2" style="text-align: center;">სტატუსი</th>
                                <th rowspan="2" style="text-align: center; width: 110px;">კაზინოს <br /> N</th>
                                <th rowspan="2" style="text-align: center; width: 110px;">სერიული <br /> N</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">პლატფორმის <br /> N</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">პლომბის <br /> N</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">BET</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">WIN</th>
                                <th colspan="2" style="text-align: center; width: 320px;">ელექტრონული მრიცხველები</th>
                                <th rowspan="2" style="text-align: center; width: 160px;">GAMES</th>
                                <th colspan="2" style="text-align: center; width: 320px;">მექანიკური მრიცხველები</th>
                                <th rowspan="2"><a class="btn btn-sm btn-primary" ng-click="blockControl ? null : AddSubProtocol()" ng-disabled="blockControl"><i class="fa fa-plus"></i></a></th>
                            </tr>
                            <tr>
                                <th style="text-align: center; width: 160px;">IN</th>
                                <th style="text-align: center; width: 160px;">OUT</th>
                                <th style="text-align: center; width: 160px;">IN</th>
                                <th style="text-align: center; width: 160px;">OUT</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="btn-group" dropdown style="width: 100%;">
                                        <button style="width: 100%;" type="button" class="btn btn-default" dropdown-toggle>
                                            {{subProtocolStatuses[selectedSubProtocolStatus]}} <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                                            <li ng-repeat="subProtocolStatus in subProtocolStatuses" role="menuitem" ng-click="SelectSubProtocolStatus($index)"><a>{{subProtocolStatus}}</a></li>
                                        </ul>
                                    </div>
                                </td>
                                <td><input type="text" class="form-control" ng-model="casinoNumber" id="casinoNumber" /></td>
                                <td><input type="text" class="form-control" ng-model="serialNumber" id="serialNumber" /></td>
                                <td><input type="text" class="form-control" ng-model="platformNumber" id="platformNumber" /></td>
                                <td><input type="text" class="form-control" ng-model="plombNumber" /></td>
                                <td><input type="text" class="form-control" ng-model="bet" id="bet" /></td>
                                <td><input type="text" class="form-control" ng-model="win" id="win" /></td>
                                <td><input type="text" class="form-control" ng-model="electricIn" id="electricIn" /></td>
                                <td><input type="text" class="form-control" ng-model="electricOut" id="electricOut" /></td>
                                <td><input type="text" class="form-control" ng-model="games" id="games" /></td>
                                <td><input type="text" class="form-control" ng-model="mechanicIn" id="mechanicIn" /></td>
                                <td><input type="text" class="form-control" ng-model="mechanicOut" id="mechanicOut" /></td>
                            </tr>
                            <tr ng-repeat="subProtocol in protocol.subProtocols | filter:FilterNotDeleted">
                                <td><input type="text" class="form-control" ng-model="subProtocolStatuses[subProtocol.status]" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.casinoNumber" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.serialNumber" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.platformNumber" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.plombNumber" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.bet" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.win" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.electricIn" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.electricOut" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.games" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.mechanicIn" readonly /></td>
                                <td><input type="text" class="form-control" ng-model="subProtocol.mechanicOut" readonly /></td>
                                <th><a class="btn btn-sm btn-danger" ng-click="blockControl ? null : subProtocol.Deleted = true" ng-disabled="blockControl"><i class="fa fa-remove"></i></a></th>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <a class="btn btn-lg btn-success" style="position: fixed; bottom: 0; right: 340px; width: 150px;" ng-click="blockControl ? null : SaveAndCloseProtocolLayout()" ng-disabled="blockControl"><i class="fa fa-save"></i> შენახვა</a>
            <a class="btn btn-lg btn-warning" style="position: fixed; bottom: 0; right: 170px; width: 150px;" ng-click="blockControl ? null : OpenProtocolPreSignatureLayout()" ng-disabled="blockControl"><i class="fa fa-pencil"></i> ხელმოწერა</a>
            <a class="btn btn-lg btn-danger" style="position: fixed; bottom: 0; right: 0; width: 150px;" ng-click="ShowProtocolLayout = false"><i class="fa fa-close"></i> დახურვა</a>
        </div>
        <!--Protocols layout end-->

        <!--Protocol Signature Layout Start-->
        <div class="slider1 slide-in1 fadeout" style="background-color: #fff;" ng-show="ShowProtocolSignatureLayout" ng-animate="slide">
            <div style="background-color: #EEEEEE; height: 32px; border: 1px solid #cccccc;" class="form-inline">
                <label style="margin: 5px 0 0 5px;">კომპანია "{{selectedContragent.name}}" -ს წარმომადგენელი</label>
                <a class="btn btn-sm btn-default" style="float: right;" ng-click="ClearContragentProtocolSignature()"><i class="fa fa-trash"></i></a>
            </div>
            <canvas id="contragentProtocolSignature"></canvas>

            <div style="background-color: #EEEEEE; height: 32px; border: 1px solid #cccccc;" class="form-inline">
                <label style="margin: 5px 0 0 5px;">კომპანია "შპს ევრო გეიმს ტექნოლოჯი ჯორჯია" -ს წარმომადგენელი "{{userName}}"</label>
                <a class="btn btn-sm btn-default" style="float: right;" ng-click="ClearUserProtocolSignature()"><i class="fa fa-trash"></i></a>
            </div>
            <canvas id="userProtocolSignature"></canvas>

            <a class="btn btn-lg btn-primary" style="position: fixed; bottom: 0; right: 170px; width: 150px;" ng-click="SaveAndCloseProtocolSignatureLayout()"><i class="fa fa-check"></i> დამატება</a>
            <a class="btn btn-lg btn-danger" style="position: fixed; bottom: 0; right: 0; width: 150px;" ng-click="ShowProtocolSignatureLayout = false"><i class="fa fa-close"></i> დახურვა</a>
        </div>
        <!--Protocol Signature Layout End-->

        <a class="btn btn-lg btn-default" style="position: fixed; bottom: 0; float: left; width: 150px; left: -10px;" ng-click="blockControl ? null : DeleteVisit()" ng-disabled="blockControl"><i class="fa fa-trash"></i> წაშლა</a>
        <a class="btn btn-lg btn-success" style="position: fixed; bottom: 0; right: 340px; width: 150px;" ng-click="blockControl ? null : SaveVisit()" ng-disabled="blockControl"><i class="fa fa-save"></i> შენახვა</a>
        <a class="btn btn-lg btn-warning" style="position: fixed; bottom: 0; right: 170px; width: 150px;" ng-click="blockControl ? null : OpenVisitPreSignatureLayout()" ng-disabled="blockControl"><i class="fa fa-pencil"></i> ხელმოწერა</a>
        <a class="btn btn-lg btn-danger" style="position: fixed; bottom: 0; right: 0; width: 150px;" ng-click="CloseVisit()"><i class="fa fa-sign-out"></i> გასვლა</a>
    </div>
    <!--Layout End-->


    <!--Chosen Equipment Modal Start-->
    <script type="text/ng-template" id="ChosenEquipmentModal.html">
        <div class="modal-header">
            <a class="close" ng-click="Cancel()">&times;</a>
            <h3 class="modal-title">{{equipmentName}}</h3>
        </div>

        <div class="modal-body" data-ng-init="init()">
            <div class="input-group input-group-lg" style="width: 100%;">
                <span class="input-group-addon" style="width: 150px !important;"><i class="fa fa-barcode"></i> სერია</span>
                <input id="txtEquipmentSeries" class="form-control input-lg" type="text" ng-model="equipmentSeries" style="width: 395px;" />
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;">
                <span class="input-group-addon" style="width: 150px !important;"><i class="fa fa-clock-o"></i> დრო</span>
                <input id="txtDoorOpenDate" style="width: 395px" ng-click="openDatepicker($event)" type="text" class="form-control" datepicker-options="dateOptions" datepicker-popup="yyyy-MM-dd" ng-model="doorOpenDate" is-open="dtpr_opened" on-open-focus="false" close-text="დახურვა" clear-text="გასუფთავება" current-text="დღეს">
                <input id="txtDoorOpenTime" class="form-control input-lg" type="text" ng-model="doorOpenTime" style="width: 395px" />
            </div>
        </div>

        <div class="modal-footer">
            <a class="btn btn-lg btn-primary" ng-click="Save()" style="width: 150px;"><i class="fa fa-save"></i> შენახვა</a>
            <a class="btn btn-lg btn-default" ng-click="Cancel()" style="width: 150px;"><i class="fa fa-close"></i> დახურვა</a>
        </div>
    </script>
    <!--Chosen Equipment Modal End-->

    <!--Chosen Product Modal Start-->
    <script type="text/ng-template" id="ChosenProductModal.html">
        <div class="modal-header">
            <a class="close" ng-click="Cancel()">&times;</a>
            <h3 class="modal-title">{{productName}}</h3>
        </div>

        <div class="modal-body">
            <div class="input-group input-group-lg" style="width: 100%;">
                <div class="btn-group" dropdown style="width: 100%;">
                    <button style="width: 100%;" type="button" class="btn btn-lg btn-default" dropdown-toggle ng-disabled="disabled">
                        {{saleTypes[selectedSaleTypeIndex]}} <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                        <li ng-repeat="saleType in saleTypes" role="menuitem" ng-click="SelectSaleType($index)"><a>{{saleType}}</a></li>
                    </ul>
                </div>
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;">
                <div class="btn-group" dropdown style="width: 100%;">
                    <button style="width: 100%;" type="button" class="btn btn-lg btn-default" dropdown-toggle ng-disabled="disabled">
                        {{stores[selectedStoreIndex].Name}} <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                        <li ng-repeat="store in stores" role="menuitem" ng-click="SelectStore($index)"><a>{{store.Name}}</a></li>
                    </ul>
                </div>
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;">
                <span class="input-group-addon" style="width: 200px !important;"><i class="fa fa-list-ol"></i> რაოდენობა</span>
                <input id="txtProductAmount" class="form-control input-lg" type="text" ng-model="amount" style="width: 100%;" />
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;">
                <span class="input-group-addon" style="width: 200px !important;"><i class="fa fa-dollar"></i> ფასდაკლება</span>
                <input id="txtProductDiscount" class="form-control input-lg" type="number" min="0" max="100" ng-model="discount" style="width: 100%;" />
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;">
                <span class="input-group-addon" style="width: 200px !important;"><i class="fa fa-times-circle"></i> ძველი სერია</span>
                <input id="txtProductOldSeries" class="form-control input-lg" type="text" ng-model="OldSeries" style="width: 100%;" />
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;">
                <span class="input-group-addon" style="width: 200px !important;"><i class="fa fa-times-circle-o"></i> ახალი სერია</span>
                <input id="txtProductNewSeries" class="form-control input-lg" type="text" ng-model="NewSeries" style="width: 100%;" />
            </div>
        </div>

        <div class="modal-footer">
            <a class="btn btn-lg btn-primary" ng-click="Save()" style="width: 150px;"><i class="fa fa-save"></i> შენახვა</a>
            <a class="btn btn-lg btn-default" ng-click="Cancel()" style="width: 150px;"><i class="fa fa-close"></i> დახურვა</a>
        </div>
    </script>
    <!--Chosen Product Modal End-->

    <!--Provided Service Modal Start-->
    <script type="text/ng-template" id="ProvidedServiceModal.html">
        <!--Loader Start-->
        <div class="slider2 slide-in2 fadeout" ng-show="ShowLoader" ng-animate="slide" style="background-color: #fff;">
            <div class="outer">
                <div class="middle">
                    <div class="inner">
                        <center>
                            <img src="../../Content/Resources/preloader.gif" />
                            <img src="../../Content/Resources/EGT-logo-wt.png" style="width: 115px; height: 55px;" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
        <!--Loader End-->

        <div class="modal-header">
            <a class="close" ng-click="Cancel()">&times;</a>
            <h4 class="modal-title">მომსახურებები</h4>
        </div>

        <div class="modal-body" data-ng-init="init()">
            <input class="input-lg form-control" ng-model="searchProvidedService" style="margin-bottom: 10px;" placeholder="ძებნა..." />
            <input class="input-lg form-control" type="number" ng-model="quantity" style="margin-bottom: 10px;" placeholder="რაოდენობა" />
            <input class="input-lg form-control" type="number" ng-model="discount" style="margin-bottom: 10px;" placeholder="ფასდაკლება" />
            <div style="height: 400px; overflow-y: auto;">               
                <table class="table table-bordered table-hover table-striped">
                    <thead>
                        <tr>
                            <td>დასახელება</td>
                            <td>კოდი</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="providedService in providedServices | filter: searchProvidedService" ng-click="SelectProvidedService(providedService)">
                            <td>{{providedService.Name}} <b>{{providedService.Price}} ({{providedService.currency}})</b></td>
                            <td>{{providedService.Code}} <input type="checkbox" style="float: right;" ng-model="providedService.checked" /></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="modal-footer">
            <a class="btn btn-lg btn-primary" ng-click="Save()"><i class="fa fa-save"></i> შენახვა</a>
            <a class="btn btn-lg btn-default" ng-click="Cancel()"><i class="fa fa-close"></i> დახურვა</a>
        </div>
    </script>
    <!--Provided Service Modal End-->

    <!--Product Modal Start-->
    <script type="text/ng-template" id="ProductModal.html">
        <!--Loader Start-->
        <div class="slider2 slide-in2 fadeout" ng-show="ShowLoader" ng-animate="slide" style="background-color: #fff;">
            <div class="outer">
                <div class="middle">
                    <div class="inner">
                        <center>
                            <img src="../../Content/Resources/preloader.gif" />
                            <img src="../../Content/Resources/EGT-logo-wt.png" style="width: 115px; height: 55px;" />
                        </center>
                    </div>
                </div>
            </div>
        </div>
        <!--Loader End-->

        <div class="modal-header">
            <a class="close" ng-click="Cancel()">&times;</a>
            <h4 class="modal-title">მასალები</h4>
        </div>

        <div class="modal-body" data-ng-init="init()">
            <input class="input-lg form-control" ng-model="searchProduct" style="margin-bottom: 10px;" placeholder="ძებნა..." />
            <div style="height: 400px; overflow-y: auto;">               
                <table class="table table-bordered table-hover table-striped">
                    <thead>
                        <tr>
                            <td>დასახელება</td>
                            <td>შტრიხკოდი</td>
                            <td>კოდი</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="product in products | filter: searchProduct" ng-click="SelectProduct(product)">
                            <td>{{product.Name}} <b>{{product.Price}} ({{product.currency}})</b></td>
                            <td>{{product.barcode}}</td>
                            <td>{{product.Code}} <input type="checkbox" style="float: right;" ng-model="product.checked" /></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="modal-footer">
            <a class="btn btn-lg btn-primary" ng-click="Save()"><i class="fa fa-save"></i> შენახვა</a>
            <a class="btn btn-lg btn-default" ng-click="Cancel()"><i class="fa fa-close"></i> დახურვა</a>
        </div>
    </script>
    <!--Product Modal End-->

    <!--Serial Modal Start-->
    <script type="text/ng-template" id="SerialModal.html">
        <div class="modal-header">
            <a class="close" ng-click="Cancel()">&times;</a>
            <h3 class="modal-title">{{actionItemName}}</h3>
        </div>

        <div class="modal-body">            
            <div class="input-group input-group-lg" style="width: 100%;">
                <span class="input-group-addon" style="width: 200px !important;"><i class="fa fa-keyboard-o"></i> სერია</span>
                <input id="txtProductSerial" class="form-control input-lg" type="text" ng-model="serialNumber" style="width: 100%;" />
            </div>
        </div>

        <div class="modal-footer">
            <a class="btn btn-lg btn-primary" ng-click="Save()" style="width: 150px;"><i class="fa fa-save"></i> შენახვა</a>
            <a class="btn btn-lg btn-default" ng-click="Cancel()" style="width: 150px;"><i class="fa fa-close"></i> დახურვა</a>
        </div>
    </script>
    <!--Serial Modal End-->

    <!--Waybill Modal Start-->
    <script type="text/ng-template" id="WaybillModal.html">
        <div class="modal-header">
            <a class="close" ng-click="cancel()">&times;</a>
            <h3 class="modal-title">მენიუ</h3>
        </div>

        <div class="modal-body">
            <div class="input-group input-group-lg" style="width: 100%;">
                <div class="btn-group" dropdown style="width: 100%;">
                    <button style="width: 100%;" type="button" class="btn btn-lg btn-default" dropdown-toggle ng-disabled="disabled">
                        {{types[selectedTypeIndex].name}} <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                        <li ng-repeat="type in types" role="menuitem" ng-click="selectType($index)"><a>{{type.name}}</a></li>
                    </ul>
                </div>
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;" ng-show="showTransType">
                <div class="btn-group" dropdown style="width: 100%;">
                    <button style="width: 100%;" type="button" class="btn btn-lg btn-default" dropdown-toggle ng-disabled="disabled">
                        {{transTypes[selectedTransTypeIndex].name}} <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="single-button" style="width: 100%;">
                        <li ng-repeat="transType in transTypes" role="menuitem" ng-click="selectTransType($index)"><a>{{transType.name}}</a></li>
                    </ul>
                </div>
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;" ng-show="showTransTxt">
                <span class="input-group-addon" style="width: 250px !important; text-align: left;">ტრანსპორტი</span>
                <input id="txtTransTxt" class="form-control input-lg" type="text" ng-model="transTxt" style="width: 100%;" />
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;" ng-show="showEndAddr">
                <span class="input-group-addon" style="width: 250px !important; text-align: left;">დასრულების ადგილი</span>
                <input id="txtEndAddr" class="form-control input-lg" type="text" ng-model="endAddr" style="width: 100%;" />
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;" ng-show="showDriverTin">
                <span class="input-group-addon" style="width: 250px !important; text-align: left;">მძღოლის პირადი ნომერი</span>
                <input id="txtDriverTin" class="form-control input-lg" type="text" ng-model="driverTin" style="width: 100%;" />
            </div>
            <br />
            <div class="input-group input-group-lg" style="width: 100%;" ng-show="showCarNumber">
                <span class="input-group-addon" style="width: 250px !important; text-align: left;">ავტომობილის ნომერი</span>
                <input id="txtCarNumber" class="form-control input-lg" type="text" ng-model="carNumber" style="width: 100%;" />
            </div>
        </div>

        <div class="modal-footer">
            <a class="btn btn-lg btn-primary" ng-click="save()" style="width: 150px;"><i class="fa fa-save"></i> შენახვა</a>
            <a class="btn btn-lg btn-default" ng-click="cancel()" style="width: 150px;"><i class="fa fa-close"></i> დახურვა</a>
        </div>
    </script>
    <!--Waybill Modal End-->
</body>
</html>